generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Usuario {
  id              Int        @id @default(autoincrement())
  nombre          String
  contrase√±a      String
  mail            String     @unique
  descripcion     String
  rolPostulante   Boolean
  fecha           DateTime
  fotoperfil      String

  // Relaciones
  ofertasCreadas    Oferta[]   @relation("UsuarioOfertas")
  proyectosCreados  Proyecto[] @relation("UsuarioProyectos")
  formulario Formulario[]
 
}

 //Creamos la entidad intermedia entre postulante y oferta
 model Formulario{
    postuladoId Int
    postulado Usuario @relation(fields:[postuladoId], references: [id])
    ofertaId Int
    oferta Oferta @relation(fields:[ofertaId], references: [id])
    @@id([postuladoId, ofertaId])
 }

model Oferta {
  id         Int       @id @default(autoincrement())
  categoria  String
  ubicacion  String
  sueldo     Int?
  modalidad  String
  horario    DateTime[]

  // Relaciones
  creador     Usuario   @relation("UsuarioOfertas", fields: [creadorId], references: [id])
  creadorId   Int
  formulario Formulario[]
}

model Proyecto {
  id               Int      @id @default(autoincrement())
  nombre           String
  descripcion      String
  tecnologiasUsadas String
  createdAt        DateTime @default(now())

  // Relaciones
  creador   Usuario @relation("UsuarioProyectos", fields: [creadorId], references: [id])
  creadorId Int
}
